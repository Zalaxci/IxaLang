<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>IxaLang</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<ixalang-dictionary></ixalang-dictionary>
	<!-- <script type="module" src="./lit-elements/ixalang-dictionary.js"></script> -->
	<script type="module">
		(async function init() {
			// Create some utility functions that should be available everywhere
			window.howManyBytesIn = (str) => {
				return new TextEncoder().encode(str).length
			}
			window.apiInfo = {
				getWordsUrl: (languagePair, word) => `/get/words/${languagePair}/${word}`,
				getSentencesUrl: (languagePair, word, page) => `/get/sentences/${languagePair}/${word}/${page}`,
				getLanguagesUrl: () => '/get/dictionary-languages',
			}
			// Fetch Lit.js (object of exports) and available languages (list of target languages for each base language) in parallel
			const [litJS, availableTargetLangs] = await Promise.all([
				import('https://cdn.jsdelivr.net/gh/lit/dist@2.8.0/all/lit-all.min.js'),
				fetch(apiInfo.getLanguagesUrl()).then(res => res.json()),
			])
			// Next up, make them available globally across all scripts
			Object.assign(window, litJS, { availableTargetLangs })
			// Finally, import all our scripts (in parallel)
			import('./lit-elements/dictionary-entries.js')
			import('./lit-elements/ixalang-dictionary.js')
		})()
	</script>
</body>
</html>